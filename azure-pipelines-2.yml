trigger:
- none   # No automatic trigger (you'll run it manually via CLI)

parameters:
  - name: FORTANIX_API_KEY
    type: string
    default: ''
    #allowOverride: true  # ðŸ‘ˆ allows setting it at queue time

pool:
  name: 'Default'

steps:
- task: CmdLine@2
  displayName: 'Run a one-line script'
  inputs:
    script: echo "$FORTANIX_API_KEY"
  env:
      FORTANIX_API_KEY: ${{ parameters.FORTANIX_API_KEY }}
- task: Fortanix-Secret-Management@1
  inputs:
    FORTANIX_API_ENDPOINT: 'apac.smartkey.io'
    FORTANIX_API_KEY: '$(FORTANIX_API_KEY)'
    FORTANIX_SECRET: 'adf-demo'
    SECRET_VARIABLE_NAME: 'FORTANIX_SECRET_VALUE'
  env:
      FORTANIX_API_KEY: ${{ parameters.FORTANIX_API_KEY }}